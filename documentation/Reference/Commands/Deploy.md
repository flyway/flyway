---
subtitle: Deploy
---

{% include enterprise.html %}

The `deploy` command executes a deployment script against a target database and optionally takes and stores a snapshot
of the resulting database schema.
Can be used in conjunction with scripts generated by `flyway prepare`.

Can optionally take a [snapshot](https://documentation.red-gate.com/flyway/flyway-concepts/snapshots) of the target
database on deployment success and store it in the target database or elsewhere. This allows for
[drift detection](https://documentation.red-gate.com/flyway/flyway-concepts/drift-analysis) on the target database,
as well as providing one
possible [rollback mechanism](https://documentation.red-gate.com/flyway/deploying-database-changes-using-flyway/implementing-a-roll-back-strategy).

## Usage examples

### Deploying an arbitrary SQL script and embedding a snapshot

```
flyway deploy -scriptFilename="D__deployment.sql" -environment=production -saveSnapshot=true
```

### Deploying a deployment script generated by [prepare](<Commands/Prepare>)

```
flyway prepare -source=schemaModel -target=production -scriptFilename=D__deployment.sql -saveSnapshot=true
flyway deploy -scriptFilename="D__deployment.sql" -environment=production
```

Note that it is also possible to chain these commands:

```
flyway prepare -source=schemaModel deploy -environment=production -saveSnapshot=true
```

### Deploying to an environment not contained in the TOML configuration

```
flyway deploy -url="<url>" -user="<user>" -password="<password>" -saveSnapshot=true
```

## Parameters

### Optional

| Parameter                                                                                                          | Namespace | Description                                                                                                      |
|--------------------------------------------------------------------------------------------------------------------|-----------|------------------------------------------------------------------------------------------------------------------|
| [`scriptFilename`](<Configuration/Flyway Namespace/Flyway Deploy Namespace/Flyway Deploy Script Filename Setting>) | deploy    | The path to the script that will be deployed.                                                                    |
| [`saveSnapshot`](<Configuration/Flyway Namespace/Flyway Deploy Namespace/Flyway Deploy Save Snapshot Setting>)     | deploy    | Whether to generate a snapshot of the schema state after deployment.                                             |
| [`batch`](<Configuration/Flyway Namespace/Flyway Batch Setting>)                                                   | (root)    | Whether to batch SQL statements when executing them.                                                             |
| [`configFiles`](<Command-line Parameters/Config Files Parameter>)                                                  | (root)    | The location of the flyway configuration files.                                                                  |
| [`encoding`](<Configuration/Flyway Namespace/Flyway Encoding Setting>)                                             | (root)    | The encoding of the script to be deployed.                                                                       |
| [`environment`](<Configuration/Flyway Namespace/Flyway Environment Setting>)                                       | (root)    | The name of the environment to deploy to.                                                                        |
| [{environment parameters}](<Configuration/Environments Namespace>)                                                 | (root)    | Environment configuration for the target environment.                                                            |
| [`executeInTransaction`](<Configuration/Flyway Namespace/Flyway Execute In Transaction Setting>)                   | (root)    | Whether to run the script within a transaction.                                                                  |
| [`workingDirectory`](<Command-line Parameters/Working Directory Parameter>)                                        | (root)    | The directory to consider the current working directory. All relative paths will be considered relative to this. |

Universal commandline parameters are listed [here](<Command-line Parameters>).

## JSON output format

```json
{
  "scriptExecuted": "C:\\workingDirectory\\D__deployment.sql",
  "deploymentResults": [],
  "database": "production"
}
```

## Error codes

This command can produce the following error codes:

- [Generic error codes](<Exit codes and error codes/General error codes>)